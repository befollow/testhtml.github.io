System.register("chunks:///_virtual/ItemBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,n,s;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,n=e._decorator,s=e.Component}],execute:function(){var a;r._RF.push({},"3da09bCCgVJZZhIaM23etsK","ItemBase",void 0);var c=n.ccclass;n.property,e("ItemBase",c("ItemBase")(a=function(e){function r(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this).idx=0,t.data=null,t}return t(r,e),r}(s))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/PageViewHLoop.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PageItem.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,h,l,c,u,d,p,f,g,_,m,v,x;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,r=t._decorator,h=t.ScrollView,l=t.Node,c=t.UITransform,u=t.macro,d=t.instantiate,p=t.log,f=t.tween,g=t.Vec3,_=t.Vec2,m=t.view,v=t.Component},function(t){x=t.PageItem}],execute:function(){var w,P,C,V,T,b,y,W,I,S;a._RF.push({},"4f8c8U3/X9PVLnCjw9K6RGj","PageViewHLoop",void 0);var A=r.ccclass,M=r.property,z=r.requireComponent;t("PageViewHLoop",(w=A("PageViewHLoop"),P=z(h),C=M({type:l,tooltip:"item 模板"}),w(V=P((b=e((T=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"temp",b,o(e)),n(e,"spawnCount",y,o(e)),n(e,"itemWidth",W,o(e)),n(e,"sapce",I,o(e)),n(e,"adhere",S,o(e)),e.onPageRender=null,e.onUpdateChildTransform=null,e.onPageTurn=null,e._looppages=[],e._isInit=!1,e._dataArr=[],e._lastContentPosX=0,e._offValue=0,e._moveTween=null,e._curPage=null,e._isTweenMoveing=!1,e}i(e,t);var a=e.prototype;return a.fixIdx=function(t){return t>=this.itemCount?t%this.itemCount:t},a.onLoad=function(){this.node.on("scroll-began",this._onScrollBegan,this),this.node.on("scroll-ended",this._onScrollEnded,this)},a.onDestroy=function(){},a.start=function(){},a.initialize=function(){if(!this._isInit){this.content.getComponent(c).width=u.REPEAT_FOREVER,this.content.getComponent(c).anchorX=.5,this.content.getComponent(c).anchorY=.5,this.content.setPosition((this.sapce+this.itemWidth)/2,0,0),this._lastContentPosX=this.content.position.x;var t=(this.itemWidth+this.sapce)*this.spawnCount;this._curPage=null;for(var e=0;e<this.spawnCount;++e){var i=d(this.temp),n=i.addComponent(x);this.content.addChild(i),i.setPosition((this.sapce+this.itemWidth)/2+(this.sapce+this.itemWidth)*e-t/2,0,0),i.active=!0,this._looppages.push(i),n.idx=e,n.idx=this.fixIdx(n.idx),n.data=this.dataArr[n.idx],this.renderPage(i)}this.renderCenterItem(),this._isInit=!0}},a._onScrollBegan=function(){this._stopScoll()},a._onScrollEnded=function(t){p("_onScrollEnded:"+this.scrollView.getMaxScrollOffset(),this.content.position.x),this.dealAdhere()},a.dealAdhere=function(){this._offValue=this._offValue%(this.sapce+this.itemWidth);var t;t=this.content.position.x-.5*this._offValue,this._scollTo(t)},a.toNextPage=function(t){void 0===t&&(t=.3),this._offValue=this._offValue%(this.sapce+this.itemWidth);var e=this.content.position.x-.5*(this.sapce+this.itemWidth)-.5*this._offValue;this._scollTo(e,t,(function(){}))},a.toPrePage=function(t){void 0===t&&(t=.3),this._offValue=this._offValue%(this.sapce+this.itemWidth);var e=this.content.position.x+.5*(this.sapce+this.itemWidth)+.5*this._offValue;this._scollTo(e,t,(function(){}))},a.scollToPage=function(t){if(this._curPage){var e=t-this._curPage.idx;this._offValue=this._offValue%(this.sapce+this.itemWidth);var i=this.content.position.x-(this.sapce+this.itemWidth)*e*.5-.5*this._offValue;this._scollTo(i)}},a._scollTo=function(t,e,i){var n=this;void 0===e&&(e=.3),void 0===i&&(i=void 0),this._isTweenMoveing||(this._moveTween&&this._moveTween.stop(),this._isTweenMoveing=!0,this._moveTween=f(this.content).delay(.02).to(e,{position:new g(t,0,0)}).call((function(){n.renderCenterItem(),n._isTweenMoveing=!1,i&&i()})).start())},a._stopScoll=function(){this._moveTween&&this._moveTween.stop(),this._isTweenMoveing=!1},a.update=function(t){},a.renderPage=function(t){if(this.onPageRender){var e=t.getComponent(x);this.onPageRender(t,e.idx,e.data),this.checkCenter(t)&&(this._curPage=e)}},a.renderCenterItem=function(){this._curPage&&this.onPageTurn&&this.onPageTurn(this._curPage.node,this._curPage.idx,this._curPage.data)},a.lateUpdate=function(t){this._isInit&&(this.updateLoop(),this.updateTransform())},a.updateLoop=function(){var t=this._looppages,e=this.content.position.x-this._lastContentPosX;if(Math.abs(e)>0){for(var i=0;i<t.length;++i)t[i].setPosition(t[i].position.x+e,0,0),this.checkCenter(t[i])&&(this._curPage=t[i].getComponent(x));this._offValue+=2*e}var n=this.offValueCount;Math.abs(n)>0&&(this.swapItem(n),this._offValue=this._offValue%(this.sapce+this.itemWidth)),this._lastContentPosX=this.content.position.x},a.swapItem=function(t){if(t<0)for(var e=0;e<Math.abs(t);e++){var i=this._looppages,n=i.shift(),o=i[i.length-1].position;n.setPosition(o.x+(this.sapce+this.itemWidth),0,0),this._looppages.push(n),n.setSiblingIndex(this._looppages.length-1);var s=n.getComponent(x);s.idx=s.idx+i.length,s.idx=this.fixIdx(s.idx),s.data=this.dataArr[s.idx],this.renderPage(n)}else for(var a=0;a<Math.abs(t);a++){var r=this._looppages,h=r.pop(),l=r[0].position;h.setPosition(l.x-(this.sapce+this.itemWidth),0,0),this._looppages.splice(0,0,h),h.setSiblingIndex(0);var c=h.getComponent(x);this.itemCount>=r.length?c.idx=this.itemCount+c.idx-r.length:c.idx=this.itemCount*r.length-1+c.idx-r.length,c.idx=this.fixIdx(c.idx),c.data=this.dataArr[c.idx],this.renderPage(h)}},a.updateTransform=function(){var t=this,e=new _(m.getVisibleSize().width/2,0);this.content.children.forEach((function(i){i.getComponent(c).getBoundingBoxToWorld().center.x,e.x,t.itemWidth}))},a.checkCenter=function(t){var e=this.getBoundingBoxToWorld(t),i=new g(0,0),n=this.scrollView.view.convertToWorldSpaceAR(i);return e.contains(new _(n.x,n.y))},a.getBoundingBoxToWorld=function(t){return t.getComponent(c).getBoundingBoxToWorld()},s(e,[{key:"dataArr",get:function(){return this._dataArr},set:function(t){t.length<=0||(this._dataArr=t.slice(),this.initialize())}},{key:"itemCount",get:function(){return this._dataArr.length}},{key:"scrollView",get:function(){return this.node.getComponent(h)}},{key:"content",get:function(){return this.scrollView.content}},{key:"offValueCount",get:function(){return this._offValue>=0?Math.floor(this._offValue/(this.sapce+this.itemWidth)):Math.ceil(this._offValue/(this.sapce+this.itemWidth))}},{key:"spawnPages",get:function(){return this._looppages}},{key:"viewSize",get:function(){return this.scrollView.view.contentSize}}]),e}(v)).prototype,"temp",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(T.prototype,"spawnCount",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),W=e(T.prototype,"itemWidth",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 170}}),I=e(T.prototype,"sapce",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),S=e(T.prototype,"adhere",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),V=T))||V)||V));a._RF.pop()}}}));

System.register("chunks:///_virtual/AppTestWindow.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PageViewHLoop.ts"],(function(e){"use strict";var n,t,o,i,r,a,s,c,p,l,u;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Label,c=e.Sprite,p=e.Color,l=e.Component},function(e){u=e.PageViewHLoop}],execute:function(){var g,h,f,d,w;r._RF.push({},"d92e9n2BltLh686mFLKg7Ya","AppTestWindow",void 0);var v=a.ccclass,m=a.property;e("AppTestWindow",(g=v("AppTestWindow"),h=m({type:u}),g((w=n((d=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,o(n,"pageview",w,i(n)),n}t(n,e);var r=n.prototype;return r.onLoad=function(){},r.start=function(){this.pageview.onPageRender=this.onItemRender.bind(this),this.pageview.onPageTurn=this.onItemTurn.bind(this);for(var e=[],n=0;n<31;n++)e.push(n);this.pageview.dataArr=e},r.onBackClick=function(){this.pageview.toPrePage()},r.onNextClick=function(){this.pageview.toNextPage()},r.onScollToClick=function(){this.pageview.scollToPage(10)},r.hideAnim=function(e){e&&e()},r.onShow=function(){},r.onHide=function(){},r.onDestroy=function(){e.prototype.onDestroy.call(this)},r.handleMessage=function(e){return!1},r.listen=function(){return[]},r.onItemRender=function(e,n,t){console.log("onItemRender:"+n+">>>",t),e.getChildByName("Label").getComponent(s).string=t},r.onItemTurn=function(e,n,t){console.log("onItemCenter:"+n+">>>",t),e.getChildByName("Label").getComponent(s).string=t;for(var o=0;o<this.pageview.spawnPages.length;o++)this.pageview.spawnPages[o].getComponent(c).color=new p(155,155,155);e.getComponent(c).color=new p(0,0,254)},n}(l)).prototype,"pageview",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/PageItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./ItemBase.ts"],(function(t){"use strict";var e,n,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){c=t.ItemBase}],execute:function(){var o;n._RF.push({},"f414c9u8mhCVLabjPlbox3B","PageItem",void 0);var s=r.ccclass;r.property,t("PageItem",s("PageItem")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},n}(c))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./ItemBase.ts","./PageItem.ts","./PageViewHLoop.ts","./AppTestWindow.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});